# Copyright (C) 2021 Nicolas Lamirault <nicolas.lamirault@gmail.com>
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

restartPolicy: Always

image:
  repository: ghcr.io/nlamirault/bbox_exporter
  tag: 0.4.0
  pullPolicy: IfNotPresent

exporter:
  # -- Bbox URL
  endpoint: https://mabbox.bytel.fr
  log:
    # -- Log format. Could be logfmt or json
    format: logfmt
    # -- Log level
    level: info
  web:
    # -- HTTP port used
    port: 9311
    # -- Path under which to expose metrics.
    path: /metrics

# -- The name of a secret in the same kubernetes namespace which contain values to be added to the environment
envFromSecret: "bbox-exporter"

nodeSelector: {}
tolerations: []
affinity: {}

# -- Additional labels to add to all resources
additionalLabels: {}
  # app: bbox-exporter

# config:

# -- Additional secret mounts
# Defines additional mounts with secrets. Secrets must be manually created in the namespace.
extraSecretMounts: []
  # - name: secret-files
  #   mountPath: /run/secrets/snmp-exporter
  #   secretName: snmp-exporter-secret-files
  #   readOnly: true
  #   defaultMode: 420

## For RBAC support:
rbac:
  # -- Specifies whether RBAC resources should be created
  create: true

serviceAccount:
  # -- Specifies whether a ServiceAccount should be created
  create: true

  # The name of the ServiceAccount to use.
  # If not set and create is true, a name is generated using the fullname template
  name:

# -- Container resources: requests and limits for CPU, Memory
resources: {}
  # limits:
  #   memory: 300Mi
  # requests:
  #   memory: 50Mi

service:
  annotations: {}
  type: ClusterIP
  port: 9311

## An Ingress resource can provide name-based virtual hosting and TLS
## termination among other things for CouchDB deployments which are accessed
## from outside the Kubernetes cluster.
## ref: https://kubernetes.io/docs/concepts/services-networking/ingress/
ingress:
  enabled: false
  hosts: []
     # - chart-example.local
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  tls: []
    # Secrets must be manually created in the namespace.
    # - secretName: chart-example-tls
    #   hosts:
    #     - chart-example.local

podAnnotations: {}

# -- Number of instance
replicas: 1

serviceMonitor:
  # -- Enable this if you're using https://github.com/coreos/prometheus-operator
  enabled: false
  # -- Namespace to deploy the ServiceMonitor
  namespace: monitoring

  # fallback to the prometheus default unless specified
  # interval: 10s

  ## Defaults to what's used if you follow CoreOS [Prometheus Install Instructions](https://github.com/helm/charts/tree/master/stable/prometheus-operator#tldr)
  ## [Prometheus Selector Label](https://github.com/helm/charts/tree/master/stable/prometheus-operator#prometheus-operator-1)
  ## [Kube Prometheus Selector Label](https://github.com/helm/charts/tree/master/stable/prometheus-operator#exporters)
  selector:
    prometheus: kube-prometheus
  # Retain the job and instance labels of the metrics pushed to the snmp-exporter
  # [Scraping SNMP-exporter](https://github.com/prometheus/snmp_exporter#configure-the-snmp_exporter-as-a-target-to-scrape)
  honorLabels: true

  # -- Path to scrape metrics
  path: /metrics
  scrapeTimeout: 10s
